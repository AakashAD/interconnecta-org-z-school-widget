<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <script src="https://live.zwidgets.com/js-sdk/1.1/ZohoEmbeddedAppSDK.min.js"></script>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f9fc;
      margin: 0;
      padding: 12px;
    }

    /* Header */
    .widget-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .widget-title {
      font-size: 16px;
      font-weight: bold;
    }

    .controls button {
      margin-left: 6px;
      padding: 5px 12px;
      font-size: 12px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      color: #fff;
    }

    .controls .expand {
      background-color: #1e88e5;
    }

    .controls .collapse {
      background-color: #e53935;
    }

    /* State Banner */
    .state-banner {
      background: #1e88e5;
      color: #fff;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 14px;
      font-weight: bold;
    }


    /* Account Section */
    .account-card {
      background: #fff;
      border-radius: 6px;
      padding: 12px;
      margin-bottom: 16px;
      border-left: 6px solid #1e88e5;
    }

    .account-title {
      font-weight: bold;
      font-size: 14px;
      margin-bottom: 4px;
    }

    .account-meta {
      font-size: 12px;
      color: #555;
      margin-bottom: 8px;
    }

    .toggle {
      cursor: pointer;
      margin-right: 6px;
      font-weight: bold;
    }

    .deal-row {
      font-size: 12px;
      padding: 4px 0;
      border-bottom: 1px dashed #eee;
    }

    .hidden {
      display: none;
    }

    /* Stage Badges */
    .stage {
      font-weight: bold;
      padding: 2px 6px;
      border-radius: 10px;
      font-size: 11px;
    }
    .won { background:#c8e6c9; }
    .completed { background:#fff9c4; }
    .paid { background:#dcedc8; }
    .lead { background:#e3f2fd; }

    /* Hierarchy colors */
    .account-card.municipal-dept { border-left-color: #1e88e5; }
    .account-card.municipality { border-left-color: #43a047; }
    .account-card.county-dept { border-left-color: #8e24aa; }
    .account-card.county { border-left-color: #fb8c00; }

    .badge {
      display: inline-block;
      font-size: 11px;
      padding: 2px 6px;
      border-radius: 10px;
      margin-right: 6px;
      background: #e3f2fd;
    }
    .badge.secondary {
      background: #f1f1f1;
    }

    .deal-list.empty {
      font-size: 12px;
      color: #777;
      font-style: italic;
    }
  </style>
</head>

<body>

  <!-- Header -->
  <div class="widget-header">
    <div class="widget-title">Deal Hierarchy</div>
    <div class="controls">
      <button class="expand" onclick="expandAll()">Expand All</button>
      <button class="collapse" onclick="collapseAll()">Collapse All</button>
    </div>
  </div>

  <!-- STATE -->
  <div class="state-banner">
    STATE: NEW JERSEY
  </div>

  <!-- ACCOUNT: Municipal Department -->
  <div class="account-card municipal-dept">
    <div class="account-title">
      <span class="toggle" onclick="toggleSection('acc1')">▾</span>
      Toms River Police Department
    </div>
    <div class="account-meta">
      <span class="badge">Municipal Department</span>
      <span class="badge secondary">Police Department</span>
    </div>

    <div id="acc1">
      <div class="deal-row">
        NJ – Toms River Police Dept – ORPO – 2025-06 |
        <span class="stage won">Closed-Won</span> |
        $4,500.00
      </div>
      <div class="deal-row">
        Nicholas Lugo – SH-Training |
        <span class="stage completed">Course Completed</span> |
        $450.00
      </div>
      <div class="deal-row">
        Timothy McGarrey – SH-Training |
        <span class="stage paid">Registered & Paid</span> |
        $450.00
      </div>
      <div class="deal-row">
        James Skripko – SH-Training |
        <span class="stage paid">Registered & Paid</span> |
        $450.00
      </div>
    </div>
  </div>

  <!-- ACCOUNT: Municipality -->
  <div class="account-card municipality">
    <div class="account-title">
      <span class="toggle" onclick="toggleSection('acc2')">▾</span>
      Toms River Township, NJ
    </div>
    <div class="account-meta">
      <span class="badge">Municipality</span>
    </div>

    <div id="acc2">
      <div class="deal-row">
        NJ – Toms River Township – ORPO – 2025-03 |
        <span class="stage won">Closed-Won</span> |
        $4,500.00
      </div>
      <div class="deal-row">
        NJ – Toms River Township – Training – 2025-04 |
        <span class="stage lead">Lead Received</span> |
        $6,529,500.00
      </div>
    </div>
  </div>

  <!-- ACCOUNT: County (No Deals) -->
  <div class="account-card county">
    <div class="account-title">
      <span class="toggle" onclick="toggleSection('acc3')">▾</span>
      Ocean County
    </div>
    <div class="account-meta">
      <span class="badge">County</span>
    </div>

    <div id="acc3" class="deal-list empty">
      No deals for this account
    </div>
  </div>

  <script>
    function toggleSection(id) {
      const el = document.getElementById(id);
      const icon = event.target;
      if (el.classList.contains('hidden')) {
        el.classList.remove('hidden');
        icon.textContent = '▾';
      } else {
        el.classList.add('hidden');
        icon.textContent = '▸';
      }
    }

    function expandAll() {
      document.querySelectorAll('[id^="acc"]').forEach(el => {
        el.classList.remove('hidden');
      });
      document.querySelectorAll('.toggle').forEach(t => t.textContent = '▾');
    }

    function collapseAll() {
      document.querySelectorAll('[id^="acc"]').forEach(el => {
        el.classList.add('hidden');
      });
      document.querySelectorAll('.toggle').forEach(t => t.textContent = '▸');
    }

    ZOHO.embeddedApp.init();
  </script>

</body>
</html>